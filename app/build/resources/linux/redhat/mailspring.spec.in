Name:           <%= name %>
Version:        <%= version %>
Release:        0.1%{?dist}
Summary:        <%= description %>
License:        GPLv3
URL:            https://getmailspring.com/
AutoReqProv:    no # Avoid libchromiumcontent.so missing dependency

%ifarch i386 i486 i586 i686
Requires: lsb-core-noarch, libXss.so.1, libsecret-1.so.0, ca-certificates, libappindicator
%else
Requires: lsb-core-noarch, libXss.so.1()(64bit), libsecret-1.so.0()(64bit), ca-certificates, libappindicator
%endif

%description
<%= description %>

%install
mkdir -p %{buildroot}/usr/share/edisonmail
cp -r <%= contentsDir %>/* %{buildroot}/usr/share/edisonmail

mkdir -p %{buildroot}/usr/bin/

ln -s ../share/edisonmail/edisonmail %{buildroot}/usr/bin/edisonmail
chmod 755 %{buildroot}/usr/bin/edisonmail

mkdir -p %{buildroot}/usr/share/applications/
mv edisonmail.desktop %{buildroot}/usr/share/applications/

for s in 16 32 64 128 256 512; do
    mkdir -p %{buildroot}/usr/share/icons/hicolor/${s}x${s}/apps
    cp -p <%= linuxAssetsDir %>/icons/${s}.png %{buildroot}/usr/share/icons/hicolor/${s}x${s}/apps/edisonmail.png
done

%files
/usr/bin/edisonmail
/usr/share/edisonmail
/usr/share/applications/edisonmail.desktop
/usr/share/icons/hicolor/16x16/apps/edisonmail.png
/usr/share/icons/hicolor/32x32/apps/edisonmail.png
/usr/share/icons/hicolor/64x64/apps/edisonmail.png
/usr/share/icons/hicolor/128x128/apps/edisonmail.png
/usr/share/icons/hicolor/256x256/apps/edisonmail.png
/usr/share/icons/hicolor/512x512/apps/edisonmail.png

%post
update-desktop-database &> /dev/null

%postun
update-desktop-database &> /dev/null
