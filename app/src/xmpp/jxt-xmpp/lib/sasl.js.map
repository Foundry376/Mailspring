{"version":3,"sources":["../src/sasl.js"],"names":[],"mappings":"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","file":"sasl.js","sourcesContent":["import { Namespace as NS } from 'xmpp-constants';\n\n\nconst CONDITIONS = [\n    'aborted',\n    'account-disabled',\n    'credentials-expired',\n    'encryption-required',\n    'incorrect-encoding',\n    'invalid-authzid',\n    'invalid-mechanism',\n    'malformed-request',\n    'mechanism-too-weak',\n    'not-authorized',\n    'temporary-auth-failure',\n    'not-supported'\n];\n\n\nexport default function (JXT) {\n\n    let Utils = JXT.utils;\n\n    let Mechanisms = JXT.define({\n        name: 'sasl',\n        namespace: NS.SASL,\n        element: 'mechanisms',\n        fields: {\n            mechanisms: Utils.multiTextSub(NS.SASL, 'mechanism')\n        }\n    });\n\n    JXT.define({\n        name: 'saslAuth',\n        eventName: 'sasl:auth',\n        namespace: NS.SASL,\n        element: 'auth',\n        topLevel: true,\n        fields: {\n            value: Utils.text(),\n            mechanism: Utils.attribute('mechanism')\n        }\n    });\n\n    JXT.define({\n        name: 'saslChallenge',\n        eventName: 'sasl:challenge',\n        namespace: NS.SASL,\n        element: 'challenge',\n        topLevel: true,\n        fields: {\n            value: Utils.text()\n        }\n    });\n\n    JXT.define({\n        name: 'saslResponse',\n        eventName: 'sasl:response',\n        namespace: NS.SASL,\n        element: 'response',\n        topLevel: true,\n        fields: {\n            value: Utils.text()\n        }\n    });\n\n    JXT.define({\n        name: 'saslAbort',\n        eventName: 'sasl:abort',\n        namespace: NS.SASL,\n        element: 'abort',\n        topLevel: true\n    });\n\n    JXT.define({\n        name: 'saslSuccess',\n        eventName: 'sasl:success',\n        namespace: NS.SASL,\n        element: 'success',\n        topLevel: true,\n        fields: {\n            value: Utils.text()\n        }\n    });\n\n    JXT.define({\n        name: 'saslFailure',\n        eventName: 'sasl:failure',\n        namespace: NS.SASL,\n        element: 'failure',\n        topLevel: true,\n        fields: {\n            lang: {\n                get: function () {\n\n                    return this._lang || '';\n                },\n                set: function (value) {\n\n                    this._lang = value;\n                }\n            },\n            condition: Utils.enumSub(NS.SASL, CONDITIONS),\n            $text: {\n                get: function () {\n\n                    return Utils.getSubLangText(this.xml, NS.SASL, 'text', this.lang);\n                }\n            },\n            text: {\n                get: function () {\n\n                    let text = this.$text;\n                    return text[this.lang] || '';\n                },\n                set: function (value) {\n\n                    Utils.setSubLangText(this.xml, NS.SASL, 'text', value, this.lang);\n                }\n            }\n        }\n    });\n\n\n    JXT.extendStreamFeatures(Mechanisms);\n}\n"]}