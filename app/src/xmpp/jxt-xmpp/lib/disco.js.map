{"version":3,"sources":["../src/disco.js"],"names":[],"mappings":"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","file":"disco.js","sourcesContent":["import { Namespace as NS } from 'xmpp-constants';\n\n\nexport default function (JXT) {\n\n    let Utils = JXT.utils;\n\n\n    let DiscoCaps = JXT.define({\n        name: 'caps',\n        namespace: NS.CAPS,\n        element: 'c',\n        fields: {\n            ver: Utils.attribute('ver'),\n            node: Utils.attribute('node'),\n            hash: Utils.attribute('hash'),\n            ext: Utils.attribute('ext')\n        }\n    });\n\n    let DiscoInfo = JXT.define({\n        name: 'discoInfo',\n        namespace: NS.DISCO_INFO,\n        element: 'query',\n        fields: {\n            node: Utils.attribute('node'),\n            features: Utils.multiSubAttribute(NS.DISCO_INFO, 'feature', 'var')\n        }\n    });\n\n    let DiscoIdentity = JXT.define({\n        name: '_discoIdentity',\n        namespace: NS.DISCO_INFO,\n        element: 'identity',\n        fields: {\n            category: Utils.attribute('category'),\n            type: Utils.attribute('type'),\n            name: Utils.attribute('name'),\n            lang: Utils.langAttribute()\n        }\n    });\n\n    let DiscoItems = JXT.define({\n        name: 'discoItems',\n        namespace: NS.DISCO_ITEMS,\n        element: 'query',\n        fields: {\n            node: Utils.attribute('node')\n        }\n    });\n\n    let DiscoItem = JXT.define({\n        name: '_discoItem',\n        namespace: NS.DISCO_ITEMS,\n        element: 'item',\n        fields: {\n            jid: Utils.jidAttribute('jid'),\n            node: Utils.attribute('node'),\n            name: Utils.attribute('name')\n        }\n    });\n\n\n    JXT.extend(DiscoItems, DiscoItem, 'items');\n    JXT.extend(DiscoInfo, DiscoIdentity, 'identities');\n\n    JXT.extendIQ(DiscoInfo);\n    JXT.extendIQ(DiscoItems);\n    JXT.extendPresence(DiscoCaps);\n    JXT.extendStreamFeatures(DiscoCaps);\n\n    JXT.withDataForm(function (DataForm) {\n\n        JXT.extend(DiscoInfo, DataForm, 'extensions');\n    });\n\n    JXT.withDefinition('set', NS.RSM, function (RSM) {\n\n        JXT.extend(DiscoItems, RSM);\n    });\n}\n"]}