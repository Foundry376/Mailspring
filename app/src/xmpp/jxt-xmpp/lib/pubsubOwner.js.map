{"version":3,"sources":["../src/pubsubOwner.js"],"names":[],"mappings":"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","file":"pubsubOwner.js","sourcesContent":["import { Namespace as NS } from 'xmpp-constants';\n\n\nexport default function (JXT) {\n\n    let Utils = JXT.utils;\n\n    let PubsubOwner = JXT.define({\n        name: 'pubsubOwner',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'pubsub',\n        fields: {\n            purge: Utils.subAttribute(NS.PUBSUB_OWNER, 'purge', 'node'),\n            del: Utils.subAttribute(NS.PUBSUB_OWNER, 'delete', 'node'),\n            redirect: {\n                get: function () {\n\n                    let del = Utils.find(this.xml, NS.PUBSUB_OWNER, 'delete');\n                    if (del.length) {\n                        return Utils.getSubAttribute(del[0], NS.PUBSUB_OWNER, 'redirect', 'uri');\n                    }\n                    return '';\n                },\n                set: function (value) {\n\n                    let del = Utils.findOrCreate(this.xml, NS.PUBSUB_OWNER, 'delete');\n                    Utils.setSubAttribute(del, NS.PUBSUB_OWNER, 'redirect', 'uri', value);\n                }\n            }\n        }\n    });\n\n    let Subscription = JXT.define({\n        name: 'subscription',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'subscription',\n        fields: {\n            node: Utils.attribute('node'),\n            jid: Utils.jidAttribute('jid'),\n            subid: Utils.attribute('subid'),\n            type: Utils.attribute('subscription'),\n            configurable: Utils.boolSub('subscribe-options'),\n            configurationRequired: {\n                get: function () {\n\n                    let options = Utils.find(this.xml, NS.PUBSUB_OWNER, 'subscribe-options');\n                    if (options.length) {\n                        return Utils.getBoolSub(options[0], NS.PUBSUB_OWNER, 'required');\n                    }\n                    return false;\n                }\n            }\n        }\n    });\n\n    let Subscriptions = JXT.define({\n        name: 'subscriptions',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'subscriptions',\n        fields: {\n            node: Utils.attribute('node')\n        }\n    });\n\n    let Affiliation = JXT.define({\n        name: 'affiliation',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'affiliation',\n        fields: {\n            jid: Utils.jidAttribute('jid'),\n            type: Utils.attribute('affiliation')\n        }\n    });\n\n    let Affiliations = JXT.define({\n        name: 'affiliations',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'affiliations',\n        fields: {\n            node: Utils.attribute('node')\n        }\n    });\n\n    let Configure = JXT.define({\n        name: 'config',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'configure',\n        fields: {\n            node: Utils.attribute('node')\n        }\n    });\n\n    let Default = JXT.define({\n        name: 'default',\n        namespace: NS.PUBSUB_OWNER,\n        element: 'default'\n    });\n\n    JXT.extend(PubsubOwner, Configure);\n    JXT.extend(PubsubOwner, Subscriptions);\n    JXT.extend(PubsubOwner, Affiliations);\n    JXT.extend(PubsubOwner, Default);\n\n    JXT.extend(Subscriptions, Subscription, 'list');\n    JXT.extend(Affiliations, Affiliation, 'list');\n\n    JXT.extendIQ(PubsubOwner);\n\n    JXT.withDataForm(function (DataForm) {\n\n        JXT.extend(Configure, DataForm);\n    });\n}\n"]}